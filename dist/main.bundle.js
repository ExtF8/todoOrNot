"use strict";(self.webpackChunktodoornot=self.webpackChunktodoornot||[]).push([[179],{996:(e,t,o)=>{const c=document.querySelector("body"),n=document.querySelector("#cs-navigation"),s=document.querySelector("#cs-navigation .cs-toggle");o.p;class d{constructor(e){this.name=e,this.todos=[]}}class l{constructor(){this.projects=[]}addTodoToProject(e){let t=this.getProjectsByName(e.project);t?t.todos.push(e):(t=new d(e.project),t.todos.push(e),this.projects.push(t))}getProjectsByName(e){return this.projects.find((t=>t.name===e))}}class r{constructor(e,t,o,c,n){this.title=e,this.project=t,this.description=o,this.dueDate=c,this.priority=n,this.completed=!1}}const a=new l;class i{constructor(){this.formElement=document.getElementById("todo-form"),this.formElement.addEventListener("submit",this.handleSubmit.bind(this))}handleSubmit(e){e.preventDefault();const t=document.getElementById("title").value,o=document.getElementById("project").value,c=document.getElementById("description").value,n=document.getElementById("dueDate").value,s=document.querySelector('input[name="priority"]:checked').value,d=new r(t,o,c,n,s);a.addTodoToProject(d),console.log(a.projects),this.clearForm(),this.closeDialog()}closeDialog(){document.getElementById("dialog").close()}clearForm(){document.getElementById("title").value="",document.getElementById("project").value="",document.getElementById("description").value="",document.getElementById("dueDate").value="",document.querySelectorAll('input[name="priority"]:checked').forEach((e=>{e.checked=!1}))}}!function(){function e(){document.body.classList.add("dark-mode"),localStorage.setItem("theme","dark")}function t(){document.body.classList.remove("dark-mode"),localStorage.setItem("theme","light")}!function(){let o="light";localStorage.getItem("theme")?o=localStorage.getItem("theme"):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(o="dark"),"dark"===o?e():t()}(),document.getElementById("dark-mode-toggle").addEventListener("click",(()=>{"light"===localStorage.getItem("theme")?e():t()}))}(),function(){s.addEventListener("click",(function(){s.classList.toggle("cs-active"),n.classList.toggle("cs-active"),c.classList.toggle("cs-open"),function(){const e=document.querySelector("#cs-expanded");"false"===e.getAttribute("aria-expanded")?e.setAttribute("aria-expanded","true"):e.setAttribute("aria-expanded","false")}()}));const e=Array.from(document.querySelectorAll("#cs-navigation .cs-dropdown"));for(const t of e){const e=()=>{t.classList.toggle("cs-active")};t.addEventListener("click",e)}}(),function(e){document.getElementById("content").textContent="";const t=new l,o=new i;console.log("projectManager: ",t.projects),console.log("todoFormHandler: ",o)}()}},e=>{e(e.s=996)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MEMsVUFBVWEsT0FBTyxhQUNqQ3hELEVBQWEyQyxVQUFVYSxPQUFPLGFBQzlCM0QsRUFBTzhDLFVBQVVhLE9BQU8sV0FRNUIsV0FDSSxNQUFNQyxFQUFPM0QsU0FBU0MsY0FBYyxnQkFJakIsVUFIQTBELEVBQUtDLGFBQWEsaUJBSWpDRCxFQUFLRSxhQUFhLGdCQUFpQixRQUVuQ0YsRUFBS0UsYUFBYSxnQkFBaUIsUUFFM0MsQ0FoQklDLEVBQ0osSUFrQkEsTUFBTUMsRUFBWUMsTUFBTUMsS0FDcEJqRSxTQUFTdUMsaUJBQWlCLGdDQUU5QixJQUFLLE1BQU0yQixLQUFRSCxFQUFXLENBQzFCLE1BQU1JLEVBQVUsS0FDWkQsRUFBS3JCLFVBQVVhLE9BQU8sWUFBWSxFQUV0Q1EsRUFBS3ZDLGlCQUFpQixRQUFTd0MsRUFDbkMsQ0FDSixDS3RCQUMsR0NJZSxTQUF3QkMsR0RDekJyRSxTQUFTMEIsZUFBZSxXRXVKM0I0QyxZQUFjLEdEcEpyQixNQUFNL0MsRUFBaUIsSUFBSWQsRUFDckI4RCxFQUFrQixJQUFJL0MsRUFFNUJVLFFBQVFDLElBQUksbUJBQW9CWixFQUFlYixVQUMvQ3dCLFFBQVFDLElBQUksb0JBQXFCb0MsRUFZckMsQ0RoQkFDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2Rvb3Jub3QvLi9zcmMvbW9kdWxlcy91dGlsaXR5L21vYmlsZU5hdmlnYXRpb24uanMiLCJ3ZWJwYWNrOi8vdG9kb29ybm90Ly4vc3JjL21vZHVsZXMvZW50aXRpZXMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2Rvb3Jub3QvLi9zcmMvbW9kdWxlcy9lbnRpdGllcy90b2RvSXRlbXMuanMiLCJ3ZWJwYWNrOi8vdG9kb29ybm90Ly4vc3JjL21vZHVsZXMvdXRpbGl0eS90b2RvRm9ybUhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vdG9kb29ybm90Ly4vc3JjL21vZHVsZXMvdXRpbGl0eS9kYXJrTW9kZS5qcyIsIndlYnBhY2s6Ly90b2Rvb3Jub3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kb29ybm90Ly4vc3JjL21vZHVsZXMvcGFnZUxvYWRlcnMvaG9tZVBhZ2VMb2FkZXIuanMiLCJ3ZWJwYWNrOi8vdG9kb29ybm90Ly4vc3JjL21vZHVsZXMvdXRpbGl0eS9lbGVtZW50UmVuZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNlbGVjdCBET00gZWxlbWVudHMgZm9yIG1vYmlsZSBuYXZpZ2F0aW9uXG5jb25zdCBDU2JvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5jb25zdCBDU25hdmJhck1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3MtbmF2aWdhdGlvbicpO1xuY29uc3QgQ1NoYW1idXJnZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NzLW5hdmlnYXRpb24gLmNzLXRvZ2dsZScpO1xuXG4vKipcbiAqIFNldHMgdXAgZXZlbnQgbGlzdGVuZXJzIGZvciBtb2JpbGUgbmF2aWdhdGlvbiB0b2dnbGluZ1xuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtb2JpbGVOYXZpZ2F0aW9uVG9nZ2xpbmcoKSB7XG4gICAgQ1NoYW1idXJnZXJNZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBDU2hhbWJ1cmdlck1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnY3MtYWN0aXZlJyk7XG4gICAgICAgIENTbmF2YmFyTWVudS5jbGFzc0xpc3QudG9nZ2xlKCdjcy1hY3RpdmUnKTtcbiAgICAgICAgQ1Nib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2NzLW9wZW4nKTtcbiAgICAgICAgLy8gcnVuIHRoZSBmdW5jdGlvbiB0byBjaGVjayB0aGUgYXJpYS1leHBhbmRlZCB2YWx1ZVxuICAgICAgICBhcmlhRXhwYW5kZWQoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBhbmQgdG9nZ2xlcyB0aGUgJ2FyaWEtZXhwYW5kZWQnIGF0dHJpYnV0ZSBvbiB0aGUgbmF2aWdhdGlvbiBsaXN0XG4gICAgICovXG4gICAgZnVuY3Rpb24gYXJpYUV4cGFuZGVkKCkge1xuICAgICAgICBjb25zdCBjc1VMID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NzLWV4cGFuZGVkJyk7XG4gICAgICAgIGNvbnN0IGNzRXhwYW5kZWQgPSBjc1VMLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpO1xuXG4gICAgICAgIC8vIFRvZ2dsZSB0aGUgJ2FyaWEtZXhwYW5kZWQnIGF0dHJpYnV0ZSBiYXNlZCBvbiBpdHMgY3VycmVudCBzdGF0ZS5cbiAgICAgICAgaWYgKGNzRXhwYW5kZWQgPT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgIGNzVUwuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNzVUwuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgdXAgY2xpY2sgZXZlbnQgbGlzdGVuZXJzIGZvciBkcm9wZG93biBpdGVtcyBpbiB0aGUgbW9iaWxlIG5hdmlnYXRpb25cbiAgICBjb25zdCBkcm9wRG93bnMgPSBBcnJheS5mcm9tKFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjY3MtbmF2aWdhdGlvbiAuY3MtZHJvcGRvd24nKVxuICAgICk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRyb3BEb3ducykge1xuICAgICAgICBjb25zdCBvbkNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QudG9nZ2xlKCdjcy1hY3RpdmUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBQcm9qZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgICAgICh0aGlzLm5hbWUgPSBuYW1lKSwgKHRoaXMudG9kb3MgPSBbXSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUHJvamVjdE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByb2plY3RzID0gW107XG4gICAgfVxuXG4gICAgYWRkVG9kb1RvUHJvamVjdCh0b2RvKSB7XG4gICAgICAgIGxldCBwcm9qZWN0ID0gdGhpcy5nZXRQcm9qZWN0c0J5TmFtZSh0b2RvLnByb2plY3QpO1xuXG4gICAgICAgIGlmIChwcm9qZWN0KSB7XG4gICAgICAgICAgICBwcm9qZWN0LnRvZG9zLnB1c2godG9kbyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9qZWN0ID0gbmV3IFByb2plY3QodG9kby5wcm9qZWN0KTtcbiAgICAgICAgICAgIHByb2plY3QudG9kb3MucHVzaCh0b2RvKTtcbiAgICAgICAgICAgIHRoaXMucHJvamVjdHMucHVzaChwcm9qZWN0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFByb2plY3RzQnlOYW1lKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdHMuZmluZCgocHJvamVjdCkgPT4gcHJvamVjdC5uYW1lID09PSBuYW1lKTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVG9kbyB7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIHByb2plY3QsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGZhbHNlXG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUHJvamVjdE1hbmFnZXIgfSBmcm9tICcuLi9lbnRpdGllcy9wcm9qZWN0LmpzJztcbmltcG9ydCB7IFRvZG8gfSBmcm9tICcuLi9lbnRpdGllcy90b2RvSXRlbXMuanMnO1xuXG5jb25zdCBwcm9qZWN0TWFuYWdlciA9IG5ldyBQcm9qZWN0TWFuYWdlcigpO1xuXG5leHBvcnQgY2xhc3MgVG9kb0Zvcm1IYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5mb3JtRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLWZvcm0nKTtcbiAgICAgICAgdGhpcy5mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgJ3N1Ym1pdCcsXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaGFuZGxlU3VibWl0KGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUnKS52YWx1ZTtcbiAgICAgICAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0JykudmFsdWU7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uJykudmFsdWU7XG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlRGF0ZScpLnZhbHVlO1xuICAgICAgICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAnaW5wdXRbbmFtZT1cInByaW9yaXR5XCJdOmNoZWNrZWQnXG4gICAgICAgICkudmFsdWU7XG5cbiAgICAgICAgY29uc3QgbmV3VG9kbyA9IG5ldyBUb2RvKFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBwcm9qZWN0LFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBkdWVEYXRlLFxuICAgICAgICAgICAgcHJpb3JpdHlcbiAgICAgICAgKTtcblxuXG4gICAgICAgIHByb2plY3RNYW5hZ2VyLmFkZFRvZG9Ub1Byb2plY3QobmV3VG9kbyk7XG5cbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdE1hbmFnZXIucHJvamVjdHMpO1xuXG4gICAgICAgIHRoaXMuY2xlYXJGb3JtKCk7XG5cbiAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgIH1cblxuICAgIGNsb3NlRGlhbG9nKCkge1xuICAgICAgICBjb25zdCBkaWFsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlhbG9nJyk7XG4gICAgICAgIGRpYWxvZy5jbG9zZSgpO1xuICAgIH1cblxuICAgIGNsZWFyRm9ybSgpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlJykudmFsdWUgPSAnJztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3QnKS52YWx1ZSA9ICcnO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVzY3JpcHRpb24nKS52YWx1ZSA9ICcnO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlRGF0ZScpLnZhbHVlID0gJyc7XG5cbiAgICAgICAgY29uc3QgcHJpb3JpdHlSYWRpb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgICAgICAgJ2lucHV0W25hbWU9XCJwcmlvcml0eVwiXTpjaGVja2VkJ1xuICAgICAgICApO1xuICAgICAgICBwcmlvcml0eVJhZGlvcy5mb3JFYWNoKChyYWRpbykgPT4ge1xuICAgICAgICAgICAgcmFkaW8uY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCIvL1xuLy8gICAgVGhlIERhcmsgTW9kZSBTeXN0ZW1cbi8vXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRhcmtNb2RlVG9nZ2xlcigpIHtcbiAgICAvLyBoZWxwZXIgZnVuY3Rpb25zIHRvIHRvZ2dsZSBkYXJrIG1vZGVcbiAgICBmdW5jdGlvbiBlbmFibGVEYXJrTW9kZSgpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdkYXJrLW1vZGUnKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RoZW1lJywgJ2RhcmsnKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGlzYWJsZURhcmtNb2RlKCkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2RhcmstbW9kZScpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGhlbWUnLCAnbGlnaHQnKTtcbiAgICB9XG5cbiAgICAvLyBkZXRlcm1pbmVzIGEgbmV3IHVzZXJzIGRhcmsgbW9kZSBwcmVmZXJlbmNlc1xuICAgIGZ1bmN0aW9uIGRldGVjdENvbG9yU2NoZW1lKCkge1xuICAgICAgICAvLyBkZWZhdWx0IHRvIHRoZSBsaWdodCB0aGVtZVxuICAgICAgICBsZXQgdGhlbWUgPSAnbGlnaHQnO1xuXG4gICAgICAgIC8vIGNoZWNrIGxvY2FsU3RvcmFnZSBmb3IgYSBzYXZlZCAndGhlbWUnIHZhcmlhYmxlLiBpZiBpdCdzIHRoZXJlLCB0aGUgdXNlciBoYXMgdmlzaXRlZCBiZWZvcmUsIHNvIGFwcGx5IHRoZSBuZWNlc3NhcnkgdGhlbWUgY2hvaWNlc1xuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJykpIHtcbiAgICAgICAgICAgIHRoZW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgaXQncyBub3QgdGhlcmUsIGNoZWNrIHRvIHNlZSBpZiB0aGUgdXNlciBoYXMgYXBwbGllZCBkYXJrIG1vZGUgcHJlZmVyZW5jZXMgdGhlbXNlbHZlcyBpbiB0aGUgYnJvd3NlclxuICAgICAgICBlbHNlIGlmIChcbiAgICAgICAgICAgIHdpbmRvdy5tYXRjaE1lZGlhICYmXG4gICAgICAgICAgICB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpLm1hdGNoZXNcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGVtZSA9ICdkYXJrJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIHByZWZlcmVuY2Ugc2V0LCB0aGUgZGVmYXVsdCBvZiBsaWdodCB3aWxsIGJlIHVzZWQuIGFwcGx5IGFjY29yZGluZ2x5XG4gICAgICAgIHRoZW1lID09PSAnZGFyaycgPyBlbmFibGVEYXJrTW9kZSgpIDogZGlzYWJsZURhcmtNb2RlKCk7XG4gICAgfVxuXG4gICAgLy8gcnVuIG9uIHBhZ2UgbG9hZFxuICAgIGRldGVjdENvbG9yU2NoZW1lKCk7XG5cbiAgICAvLyBhZGQgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGRhcmsgbW9kZSBidXR0b24gdG9nZ2xlXG4gICAgZG9jdW1lbnRcbiAgICAgICAgLmdldEVsZW1lbnRCeUlkKCdkYXJrLW1vZGUtdG9nZ2xlJylcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gb24gY2xpY2ssIGNoZWNrIGxvY2FsU3RvcmFnZSBmb3IgdGhlIGRhcmsgbW9kZSB2YWx1ZSwgdXNlIHRvIGFwcGx5IHRoZSBvcHBvc2l0ZSBvZiB3aGF0J3Mgc2F2ZWRcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0aGVtZScpID09PSAnbGlnaHQnXG4gICAgICAgICAgICAgICAgPyBlbmFibGVEYXJrTW9kZSgpXG4gICAgICAgICAgICAgICAgOiBkaXNhYmxlRGFya01vZGUoKTtcbiAgICAgICAgfSk7XG59XG4iLCIvLyBJbXBvcnRpbmcgZ2xvYmFsLCBtYWluLCBhbmQgZGFyayBtb2RlIENTUyBzdHlsZXNoZWV0c1xuaW1wb3J0ICcuL3N0eWxlcy9nbG9iYWwuY3NzJztcbmltcG9ydCAnLi9zdHlsZXMvbWFpbi5jc3MnO1xuaW1wb3J0ICcuL3N0eWxlcy9kYXJrLmNzcyc7XG5cbi8vIEltcG9ydGluZyBmdW5jdGlvbmFsaXR5IG1vZHVsZXNcbmltcG9ydCBkYXJrTW9kZVRvZ2dsZXIgZnJvbSAnLi9tb2R1bGVzL3V0aWxpdHkvZGFya01vZGUuanMnO1xuaW1wb3J0IG1vYmlsZU5hdmlnYXRpb25Ub2dnbGluZyBmcm9tICcuL21vZHVsZXMvdXRpbGl0eS9tb2JpbGVOYXZpZ2F0aW9uLmpzJztcblxuLy8gSW1wb3J0IGltYWdlc1xuaW1wb3J0IGxvZ28gZnJvbSAnLi9hc3NldHMvaW1nL2xvZ28vdG9kb09yTm90TG9nby5wbmcnXG5cbi8vIEltcG9ydGluZyBwYWdlIGxvYWRlciBmdW5jdGlvbnNcbmltcG9ydCBob21lUGFnZUxvYWRlciBmcm9tICcuL21vZHVsZXMvcGFnZUxvYWRlcnMvaG9tZVBhZ2VMb2FkZXIuanMnO1xuXG5cbi8vIEFjdGl2YXRlIGRhcmsgbW9kZSB0b2dnbGUgZnVuY3Rpb25hbGl0eVxuZGFya01vZGVUb2dnbGVyKCk7XG5cbi8vIFNldCB1cCBtb2JpbGUgbmF2aWdhdGlvbiB0b2dnbGUgZnVuY3Rpb25hbGl0eVxubW9iaWxlTmF2aWdhdGlvblRvZ2dsaW5nKCk7XG5cbi8vIEdsb2JhbCB2YXJpYWJsZXMgc2V0dXBcbmxldCBwYWdlTmFtZXMgPSBbJ2hvbWUnLCAndG9kYXknLCAnd2VlaycsICdwcm9qZWN0cycsICdub3RlcyddO1xuLy8gbGV0IGN1cnJlbnRUYWIgPSBwYWdlTmFtZXNbMF07XG5sZXQgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50Jyk7XG5cbi8vIExvYWQgdGhlIGluaXRpYWwgaG9tZSBwYWdlIGNvbnRlbnRcbmhvbWVQYWdlTG9hZGVyKGNvbnRlbnQpO1xuXG5cblxuLyoqXG4gKiBTZXQgdXAgY2xpY2sgZXZlbnQgbGlzdGVuZXJzIGZvciB0YWIgbmF2aWdhdGlvbiBpbiB0aGUgaGVhZGVyXG4gKiBUaGlzIGFsbG93cyBzd2l0Y2hpbmcgYmV0d2VlbiBkaWZmZXJlbnQgcGFnZXMgKGhvbWUsIG1lbnUsIGNvbnRhY3RzKSBhbmRcbiAqIGVuc3VyZXMgdGhlIGFwcHJvcHJpYXRlIGNvbnRlbnQgaXMgbG9hZGVkIGFuZCBkaXNwbGF5ZWRcbiAqL1xuLy8gcGFnZU5hbWVzLmZvckVhY2goKHBhZ2VOYW1lcykgPT4ge1xuLy8gICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhZ2VOYW1lcyk7XG4vLyAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuLy8gICAgICAgICBpZiAoYnV0dG9uLmlkID09ICdob21lJykge1xuLy8gICAgICAgICAgICAgaG9tZVBhZ2VMb2FkZXIoY29udGVudCk7XG4vLyAgICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uLmlkID09ICd0b2RheScpIHtcbi8vICAgICAgICAgICAgIG1lbnVQYWdlTG9hZGVyKGNvbnRlbnQpO1xuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgY29udGFjdHNQYWdlTG9hZGVyKGNvbnRlbnQpO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIHVwZGF0ZU5hdmlnYXRpb25BY3RpdmVTdGF0ZShwYWdlTmFtZXMpO1xuLy8gICAgIH0pO1xuLy8gfSk7XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgYWN0aXZlIHN0YXRlIG9mIG5hdmlnYXRpb24gYnV0dG9ucyBhbmQgcmVtb3ZlcyBhY3RpdmUgc3RhdGUgaW4gbW9iaWxlIG5hdmlnYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBhY3RpdmVCdXR0b25JZCAtIFRoZSBJRCBvZiB0aGUgbmF2aWdhdGlvbiBidXR0b24gdG8gYmUgbWFya2VkIGFzIGFjdGl2ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTmF2aWdhdGlvbkFjdGl2ZVN0YXRlKGFjdGl2ZUJ1dHRvbklkKSB7XG4gICAgLy8gTmF2aWdhdGlvbiBidXR0b24gSURzXG4gICAgY29uc3QgbmF2aWdhdGlvbkJ1dHRvbnMgPSBbJ2hvbWUnLCAndG9kYXknLCAnY29udGFjdHMnXTtcblxuICAgIC8vIFNlbGVjdGluZyBlbGVtZW50cyByZWxhdGVkIHRvIG1vYmlsZSBuYXZpZ2F0aW9uXG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbiAgICBjb25zdCBuYXZiYXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NzLW5hdmlnYXRpb24nKTtcbiAgICBjb25zdCBoYW1idXJnZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NzLW5hdmlnYXRpb24gLmNzLXRvZ2dsZScpO1xuXG4gICAgbmF2aWdhdGlvbkJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uSWQpID0+IHtcbiAgICAgICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbklkKTtcbiAgICAgICAgaWYgKGJ1dHRvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChidXR0b25JZCA9PT0gYWN0aXZlQnV0dG9uSWQpIHtcbiAgICAgICAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NzLWFjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2xvc2UgbW9iaWxlIG5hdmlnYXRpb24gbWVudSB3aGVuIGEgbmF2aWdhdGlvbiBidXR0b24gaXMgYWN0aXZhdGVkXG4gICAgICAgICAgICAgICAgaGFtYnVyZ2VyTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdjcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBuYXZiYXJNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2NzLWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnY3Mtb3BlbicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NzLWFjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG4iLCIvLyBJbXBvcnRpbmcgdXRpbGl0eSBmdW5jdGlvbnMgZnJvbSB0aGUgJ2VsZW1lbnRSZW5kZXInIG1vZHVsZS4gVGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkXG4vLyBmb3IgY3JlYXRpbmcgdmFyaW91cyBIVE1MIGVsZW1lbnRzIGR5bmFtaWNhbGx5XG5pbXBvcnQge1xuICAgIGNyZWF0ZVNlY3Rpb24sXG4gICAgY3JlYXRlRGl2LFxuICAgIGNyZWF0ZVBpY3R1cmUsXG4gICAgY3JlYXRlTGlzdCxcbiAgICBjcmVhdGVMaXN0SXRlbSxcbiAgICBjcmVhdGVTcGFuLFxuICAgIGNyZWF0ZVRvcHBlcixcbiAgICBjcmVhdGVUaXRsZSxcbiAgICBjcmVhdGVQYXJhZ3JhcGgsXG4gICAgY2xlYXJQYWdlLFxufSBmcm9tICcuLi91dGlsaXR5L2VsZW1lbnRSZW5kZXIuanMnO1xuXG5pbXBvcnQgeyBQcm9qZWN0TWFuYWdlciB9IGZyb20gJy4uL2VudGl0aWVzL3Byb2plY3QuanMnO1xuaW1wb3J0IHsgVG9kb0Zvcm1IYW5kbGVyIH0gZnJvbSAnLi4vdXRpbGl0eS90b2RvRm9ybUhhbmRsZXIuanMnO1xuXG5cblxuLyoqXG4gKiBMb2FkcyBhbmQgZGlzcGxheXMgdGhlIGhvbWUgcGFnZSBjb250ZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250ZW50IC0gVGhlIHBhcmVudCBlbGVtZW50IHdoZXJlIHRoZSBob21lIHBhZ2Ugd2lsbCBiZSByZW5kZXJlZFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBob21lUGFnZUxvYWRlcihjb250ZW50KSB7XG4gICAgY2xlYXJQYWdlKGNvbnRlbnQpO1xuXG4gICAgLy8gSW5zdGFudGlhdGUgVG9kb0Zvcm1IYW5kbGVyIGFuZCBQcm9qZWN0TWFuYWdlclxuICAgIGNvbnN0IHByb2plY3RNYW5hZ2VyID0gbmV3IFByb2plY3RNYW5hZ2VyKCk7XG4gICAgY29uc3QgdG9kb0Zvcm1IYW5kbGVyID0gbmV3IFRvZG9Gb3JtSGFuZGxlcigpO1xuXG4gICAgY29uc29sZS5sb2coJ3Byb2plY3RNYW5hZ2VyOiAnLCBwcm9qZWN0TWFuYWdlci5wcm9qZWN0cyk7XG4gICAgY29uc29sZS5sb2coJ3RvZG9Gb3JtSGFuZGxlcjogJywgdG9kb0Zvcm1IYW5kbGVyKTtcbiAgICAvLyBTZWxlY3QgdGhlIG1haW4gY29udGVudCBhcmVhIGluIHRoZSBET01cblxuICAgIC8vIGNvbnN0IGhvbWVQYWdlQ29udGVudCA9IGNvbnRlbnQ7XG4gICAgLy8gY29uc29sZS5sb2coJ2hvbWVQYWdlQ29udGVudDogJywgaG9tZVBhZ2VDb250ZW50KTtcblxuICAgIC8vIC8vIENyZWF0ZSBhbmQgYXBwZW5kIHRoZSBtYWluIHNlY3Rpb24gYW5kIGNvbnRlbnQgZGl2XG4gICAgLy8gY29uc3QgZGl2ID0gY3JlYXRlRGl2KCdjbGFzcycsICd0ZXN0Jyk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhkaXYpO1xuICAgIC8vIGhvbWVQYWdlQ29udGVudC5hcHBlbmRDaGlsZChkaXYpO1xuXG59XG4iLCIvKipcbiAqIENyZWF0ZXMgYSBzZWN0aW9uIEhUTUwgZWxlbWVudCB3aXRoIHNwZWNpZmllZCBhdHRyaWJ1dGUgYW5kIHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlTmFtZSAtIE5hbWUgb2YgdGhlIGF0dHJpYnV0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZVZhbHVlIC0gVmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGVcbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gLSBUaGUgY3JlYXRlZCBzZWN0aW9uIGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNlY3Rpb24oYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVmFsdWUpIHtcbiAgICBjb25zdCBzZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VjdGlvbicpO1xuICAgIHNlY3Rpb24uc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVlKTtcbiAgICByZXR1cm4gc2VjdGlvbjtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZGl2IEhUTUwgZWxlbWVudCB3aXRoIGEgc3BlY2lmaWVkIGF0dHJpYnV0ZSBuYW1lIGFuZCB2YWx1ZVxuICogQHBhcmFtIHtvYmplY3R9IGF0dHJpYnV0ZU5hbWUgLSBOYW1lIG9mIHRoZSBhdHRyaWJ1dGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVWYWx1ZSAtIFZhbHVlIGZvciB0aGUgYXR0cmlidXRlXG4gKiBAcmV0dXJucyB7SFRNTERpdkVsZW1lbnR9IC0gVGhlIGNyZWF0ZWQgZGl2IGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURpdihhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVWYWx1ZSkge1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVmFsdWUpO1xuICAgIHJldHVybiBkaXY7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHBpY3R1cmUgZWxlbWVudCB3aXRoIHByb3ZpZGVkIGF0dHJpYnV0ZXMgYW5kIHNvdXJjZXNcbiAqIEBwYXJhbSB7b2JqZWN0fSBhdHRyaWJ1dGVOYW1lIC0gTmFtZSBvZiB0aGUgYXR0cmlidXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlVmFsdWUgIC0gVmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBpbWFnZVNvdXJjZXMgLSBPYmplY3QgY29udGFpbmluZyBwaWN0dXJlIHNvdXJjZXMgZm9yIGRpZmZlcmVudCBzY3JlZW4gc2l6ZXNcbiAqIEByZXR1cm5zIHtIVE1MUGljdHVyZUVsZW1lbnR9IC0gVGhlIGNyZWF0ZWQgcGljdHVyZSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQaWN0dXJlKGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVlLCBpbWFnZVNvdXJjZXMpIHtcbiAgICBjb25zdCBwaWN0dXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncGljdHVyZScpO1xuICAgIHBpY3R1cmUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVlKTtcblxuICAgIE9iamVjdC5rZXlzKGltYWdlU291cmNlcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGlmIChrZXkgPT09ICdpbWcnKSB7XG4gICAgICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZXMoaW1nLCBpbWFnZVNvdXJjZXNba2V5XSk7XG4gICAgICAgICAgICBwaWN0dXJlLmFwcGVuZENoaWxkKGltZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZXMoc291cmNlLCBpbWFnZVNvdXJjZXNba2V5XSk7XG4gICAgICAgICAgICBwaWN0dXJlLmFwcGVuZENoaWxkKHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBwaWN0dXJlO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0ICh1bCkgZWxlbWVudCB3aXRoIHByb3ZpZGVkIGF0dHJpYnV0ZXMuIFRoZSBsaXN0IGl0ZW1zIGFyZSBjcmVhdGVkIHVzaW5nIGEgcmVuZGVyaW5nIGV4cG9ydCBmdW5jdGlvbiBwYXNzZWQgYXMgYW4gYXJndW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lIC0gTmFtZSBvZiB0aGUgYXR0cmlidXRlIChlLmcuLCAnY2xhc3MnKVxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZVZhbHVlIC0gVmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGUgKGUuZy4sICdjcy1zdGF0cycpXG4gKiBAcGFyYW0ge29iamVjdH0gaXRlbURhdGEgLSBEYXRhIHRvIHBvcHVsYXRlIHRoZSBsaXN0IHdpdGguIEV4cGVjdHMgYW4gb2JqZWN0IHdoZXJlIGVhY2ggcHJvcGVydHkgY2FuIGJlIHJlbmRlcmVkIGFzIGEgbGlzdCBpdGVtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZW5kZXJJdGVtIC0gZXhwb3J0IGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4gaXRlbSBvZiBkYXRhIGFuZCByZXR1cm5zIGEgbGlzdCBpdGVtIChsaSkgZWxlbWVudFxuICogQHJldHVybnMge0hUTUxVTGlzdEVsZW1lbnR9IC0gVGhlIGNyZWF0ZWQgdW5vcmRlcmVkIGxpc3QgZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTGlzdChcbiAgICBhdHRyaWJ1dGVOYW1lLFxuICAgIGF0dHJpYnV0ZVZhbHVlLFxuICAgIGl0ZW1EYXRhLFxuICAgIHJlbmRlckl0ZW1cbikge1xuICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgIGxpc3Quc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVlKTtcblxuICAgIGZvciAobGV0IGtleSBpbiBpdGVtRGF0YSkge1xuICAgICAgICBpZiAoaXRlbURhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChyZW5kZXJJdGVtKGl0ZW1EYXRhW2tleV0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsaXN0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IGl0ZW0gKGxpKSBlbGVtZW50IHVzaW5nIGEgcHJvdmlkZWQgcmVuZGVyaW5nIGV4cG9ydCBmdW5jdGlvbiBmb3IgdGhlIGl0ZW0ncyBjb250ZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlTmFtZSAtIE5hbWUgb2YgdGhlIGF0dHJpYnV0ZSAoZS5nLiwgJ2NsYXNzJylcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVWYWx1ZSAtIFZhbHVlIGZvciB0aGUgYXR0cmlidXRlIChlLmcuLCAnY3Mtc3RhdCcpXG4gKiBAcGFyYW0ge29iamVjdH0gaXRlbSAtIERhdGEgaXRlbSB0byBiZSByZW5kZXJlZCBpbnNpZGUgdGhlIGxpc3QgaXRlbVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVuZGVyQ29udGVudCAtIGV4cG9ydCBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBpdGVtIGFuZCByZXR1cm5zIHRoZSBjb250ZW50IHRvIGJlIHBsYWNlZCBpbnNpZGUgdGhlIGxpc3QgaXRlbVxuICogQHJldHVybnMge0hUTUxMSUVsZW1lbnR9IC0gVGhlIGNyZWF0ZWQgbGlzdCBpdGVtXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMaXN0SXRlbShcbiAgICBhdHRyaWJ1dGVOYW1lLFxuICAgIGF0dHJpYnV0ZVZhbHVlLFxuICAgIGl0ZW0sXG4gICAgcmVuZGVyQ29udGVudFxuKSB7XG4gICAgY29uc3QgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIGxpc3RJdGVtLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVWYWx1ZSk7XG5cbiAgICBjb25zdCBjb250ZW50ID0gcmVuZGVyQ29udGVudChpdGVtKTtcbiAgICBsaXN0SXRlbS5hcHBlbmRDaGlsZChjb250ZW50KTtcblxuICAgIHJldHVybiBsaXN0SXRlbTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgc3BhbiBlbGVtZW50IHdpdGggYSBzcGVjaWZpZWQgY2xhc3MgYW5kIHRleHQgY29udGVudFxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWUgLSBOYW1lIG9mIHRoZSBhdHRyaWJ1dGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVWYWx1ZSAtIFZhbHVlIGZvciB0aGUgYXR0cmlidXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRleHQgY29udGVudCBmb3IgdGhlIHNwYW5cbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gLSBUaGUgY3JlYXRlZCBzcGFuIGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNwYW4oYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVmFsdWUsIHRleHQpIHtcbiAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHNwYW4uc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVlKTtcbiAgICBzcGFuLmlubmVyVGV4dCA9IHRleHQ7XG5cbiAgICByZXR1cm4gc3Bhbjtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgdG9wcGVyIGVsZW1lbnQgKHNwYW4pIHdpdGggYSBzcGVjaWZpZWQgY2xhc3MgYW5kIHRleHQgY29udGVudFxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWUgLSBOYW1lIG9mIHRoZSBhdHRyaWJ1dGUgKGUuZy4sICdjbGFzcycpXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlVmFsdWUgLSBWYWx1ZSBmb3IgdGhlIGF0dHJpYnV0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUZXh0IGNvbnRlbnQgZm9yIHRoZSB0b3BwZXJcbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gLSBUaGUgY3JlYXRlZCB0b3BwZXIgZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVG9wcGVyKGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVlLCB0ZXh0KSB7XG4gICAgY29uc3QgdG9wcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHRvcHBlci5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVmFsdWUpO1xuICAgIHRvcHBlci5pbm5lclRleHQgPSB0ZXh0O1xuXG4gICAgcmV0dXJuIHRvcHBlcjtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgdGl0bGUgZWxlbWVudCAoaDIpIHdpdGggYSBzcGVjaWZpZWQgY2xhc3MgYW5kIHRleHQgY29udGVudFxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWUgLSBOYW1lIG9mIHRoZSBhdHRyaWJ1dGUgKGUuZy4sICdjbGFzcycpXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlVmFsdWUgLSBWYWx1ZSBmb3IgdGhlIGF0dHJpYnV0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUZXh0IGNvbnRlbnQgZm9yIHRoZSB0aXRsZVxuICogQHJldHVybnMge0hUTUxIZWFkaW5nRWxlbWVudH0gLSBUaGUgY3JlYXRlZCB0aXRsZSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUaXRsZShhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVWYWx1ZSwgdGV4dCkge1xuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVmFsdWUpO1xuICAgIHRpdGxlLnRleHRDb250ZW50ID0gdGV4dDtcblxuICAgIHJldHVybiB0aXRsZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgcGFyYWdyYXBoIGVsZW1lbnQgKHApIHdpdGggYSBzcGVjaWZpZWQgY2xhc3MgYW5kIHRleHQgY29udGVudFxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWUgLSBOYW1lIG9mIHRoZSBhdHRyaWJ1dGUgKGUuZy4sICdjbGFzcycpXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlVmFsdWUgLSBWYWx1ZSBmb3IgdGhlIGF0dHJpYnV0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUZXh0IGNvbnRlbnQgZm9yIHRoZSBwYXJhZ3JhcGhcbiAqIEByZXR1cm5zIHtIVE1MUGFyYWdyYXBoRWxlbWVudH0gLSBUaGUgY3JlYXRlZCBwYXJhZ3JhcGggZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUGFyYWdyYXBoKGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVlLCB0ZXh0KSB7XG4gICAgY29uc3QgcGFyYWdyYXBoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIHBhcmFncmFwaC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVmFsdWUpO1xuICAgIHBhcmFncmFwaC50ZXh0Q29udGVudCA9IHRleHQ7XG5cbiAgICByZXR1cm4gcGFyYWdyYXBoO1xufVxuXG4vKipcbiAqIFNldHMgbXVsdGlwbGUgYXR0cmlidXRlcyBvbiBhIERPTSBlbGVtZW50IGJhc2VkIG9uIGEgcHJvdmlkZWQgb2JqZWN0XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gVGhlIERPTSBlbGVtZW50IHRvIHNldCBhdHRyaWJ1dGVzIG9uXG4gKiBAcGFyYW0ge29iamVjdH0gYXR0cmlidXRlcyAtIE9iamVjdCBjb250YWluaW5nIGtleS12YWx1ZSBwYWlycyBmb3IgYXR0cmlidXRlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG4gICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaCgoYXR0cikgPT4ge1xuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyaWJ1dGVzW2F0dHJdKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBDbGVhcnMgdGhlIGNvbnRlbnQgb2YgYSBzcGVjaWZpZWQgcGFyZW50IGVsZW1lbnRcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudCAtIFRoZSBwYXJlbnQgZWxlbWVudCB3aG9zZSBjb250ZW50IGlzIHRvIGJlIGNsZWFyZWRcbiAqIEByZXR1cm5zIHtib29sZWFufSAtIFJldHVybnMgdHJ1ZSB0byBpbmRpY2F0ZSB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclBhZ2UocGFyZW50KSB7XG4gICAgcGFyZW50LnRleHRDb250ZW50ID0gJyc7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGluayAoYW5jaG9yKSBlbGVtZW50IHdpdGggc3BlY2lmaWVkIGF0dHJpYnV0ZXMgYW5kIHRleHQgY29udGVudFxuICogQHBhcmFtIHtzdHJpbmd9IGhyZWYgLSBUaGUgYXR0cmlidXRlIG5hbWUgdG8gc2V0IG9uIHRoZSBsaW5rIChlLmcuLCAnaHJlZicpXG4gKiBAcGFyYW0ge3N0cmluZ30gaHJlZlZhbHVlIC0gVGhlIHZhbHVlIGZvciB0aGUgaHJlZiBhdHRyaWJ1dGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lIC0gdGhlIE5hbWUgb2YgdGhlIGF0dHJpYnV0ZSAoZS5nLiwgJ2NsYXNzJylcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVWYWx1ZSAtIFRoZSB2YWx1ZSBmb3IgdGhlIGF0dHJpYnV0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgdGV4dCBjb250ZW50IGZvciB0aGUgbGlua1xuICogQHJldHVybnMge0hUTUxBbmNob3JFbGVtZW50fSAtIFRoZSBjcmVhdGVkIGFuY2hvciBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMaW5rKFxuICAgIGhyZWYsXG4gICAgaHJlZlZhbHVlLFxuICAgIGF0dHJpYnV0ZU5hbWUsXG4gICAgYXR0cmlidXRlVmFsdWUsXG4gICAgdGV4dFxuKSB7XG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblxuICAgIGxpbmsuc2V0QXR0cmlidXRlKGhyZWYsIGhyZWZWYWx1ZSk7XG4gICAgbGluay5pbm5lclRleHQgPSB0ZXh0O1xuICAgIGxpbmsuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVZhbHVlKTtcbiAgICBsaW5rLnNldEF0dHJpYnV0ZSgndGFyZ2V0JywgJ19ibGFuaycpO1xuXG4gICAgcmV0dXJuIGxpbms7XG59XG4iXSwibmFtZXMiOlsiQ1Nib2R5IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiQ1NuYXZiYXJNZW51IiwiQ1NoYW1idXJnZXJNZW51IiwiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwibmFtZSIsInRoaXMiLCJ0b2RvcyIsIlByb2plY3RNYW5hZ2VyIiwicHJvamVjdHMiLCJhZGRUb2RvVG9Qcm9qZWN0IiwidG9kbyIsInByb2plY3QiLCJnZXRQcm9qZWN0c0J5TmFtZSIsInB1c2giLCJmaW5kIiwiVG9kbyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJjb21wbGV0ZWQiLCJwcm9qZWN0TWFuYWdlciIsIlRvZG9Gb3JtSGFuZGxlciIsImZvcm1FbGVtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlU3VibWl0IiwiYmluZCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsIm5ld1RvZG8iLCJjb25zb2xlIiwibG9nIiwiY2xlYXJGb3JtIiwiY2xvc2VEaWFsb2ciLCJjbG9zZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwicmFkaW8iLCJjaGVja2VkIiwiZW5hYmxlRGFya01vZGUiLCJib2R5IiwiY2xhc3NMaXN0IiwiYWRkIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImRpc2FibGVEYXJrTW9kZSIsInJlbW92ZSIsInRoZW1lIiwiZ2V0SXRlbSIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiZGV0ZWN0Q29sb3JTY2hlbWUiLCJkYXJrTW9kZVRvZ2dsZXIiLCJ0b2dnbGUiLCJjc1VMIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiYXJpYUV4cGFuZGVkIiwiZHJvcERvd25zIiwiQXJyYXkiLCJmcm9tIiwiaXRlbSIsIm9uQ2xpY2siLCJtb2JpbGVOYXZpZ2F0aW9uVG9nZ2xpbmciLCJjb250ZW50IiwidGV4dENvbnRlbnQiLCJ0b2RvRm9ybUhhbmRsZXIiLCJob21lUGFnZUxvYWRlciJdLCJzb3VyY2VSb290IjoiIn0=